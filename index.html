<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title> Quản Lý Chi Tiêu Cá nhân</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css" />
    </link>
</head>
<body>
<div class="container">
    <header>
        <h1>Quản Lý Chi Tiêu Cá Nhân</h1>
        <div>
            <button id="exportBtn" class="btn"><i class="fa-solid fa-file-excel"></i> <span class="d-none-sm">Xuất dữ liệu</span></button>
            <button id="clearBtn" class="btn ghost"><i class="fa-solid fa-trash"></i> <span class="d-none-sm">Xóa dữ liệu</span></button>
        </div>
    </header>

    <section class="card">
        <h2 style="font-size:16px;margin:0 0 12px">Chi tiêu / Thu nhập</h2>
        <form id="expenseForm">
            <div class="form-grid">
                <div>
                    <label for="type">Loại</label>
                    <select id="type">
                        <option value="expense">Chi tiêu</option>
                        <option value="income">Thu nhập</option>
                    </select>
                </div>
                <div>
                    <label for="category">Danh mục</label>
                    <select id="category">
                        <option>Lương</option>
                        <option>Ăn uống</option>
                        <option>Xăng xe</option>
                        <option>Nhà ở</option>
                        <option>Giải trí</option>
                        <option>Mua sắm</option>
                        <option>Cỗ bàn</option>
                        <option>Khác</option>
                    </select>
                </div>
                <div>
                    <label for="amount">Số tiền (VND)</label>
                    <input id="amount" type="number" step="1000" min="0" required />
                </div>
                <div>
                    <label for="date">Ngày</label>
                    <input id="date" type="date" required />
                </div>
                <div style="grid-column:1/-1">
                    <label for="desc">Mô tả</label>
                    <textarea id="desc" placeholder="Ví dụ: Đi cafe"></textarea>
                </div>
            </div>
            <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
                <button type="submit" class="btn"><i class="fa-solid fa-plus"></i> Thêm</button>
                <button type="button" id="resetForm" class="btn ghost"><i class="fa-solid fa-arrow-rotate-right"></i> Làm mới</button>
            </div>
        </form>
    </section>

    <section class="card" style="margin-top:16px">
        <div style="display:flex;gap:12px;align-items:center;justify-content:space-between">
            <div style="display:flex;gap:12px;align-items:center">
                <label class="small">Bộ lọc:</label>
                <select id="filterMonth"></select>
                <select id="filterCategory"></select>
            </div>
            <div class="small">Tổng giao dịch: <span id="count">0</span></div>
        </div>

        <div class="row" style="margin-top:12px">
            <div class="col">
                <div class="summary">
                    <div class="item">
                        <h3 id="totalBalance">0 ₫</h3>
                        <p>Tiết kiệm (Thu - Chi)</p>
                    </div>
                    <div class="item">
                        <h3 id="totalIncome">0 ₫</h3>
                        <p>Tổng thu</p>
                    </div>
                    <div class="item">
                        <h3 id="totalExpense">0 ₫</h3>
                        <p>Tổng chi</p>
                    </div>

                </div>

                <table id="txTable">
                    <thead>
                    <tr><th>Ngày</th><th>Mô tả</th><th>Danh mục</th><th>Số tiền</th><th>Loại</th><th class="actions">Hành động</th></tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <aside style="width:360px">
                <div class="card" style="padding:12px">
                    <h3 style="margin-top:0">Biểu đồ danh mục</h3>
                    <canvas id="pieChart" width="300" height="300"></canvas>
                </div>
                <div class="savings">
                    <h4>Mục tiêu tiết kiệm trong tháng</h4>
                    <input type="number" id="goalInput" placeholder="Nhập số tiền..." step="1000" min="0" required/>
                    <button id="setGoalBtn">Đặt mục tiêu</button>
                    <p>Tiến độ: <span id="savedPercent">0</span>%</p>
                    <p>Số tiền còn thiếu: <span id="remainingAmount">0</span></p>
                </div>
            </aside>
        </div>
    </section>
</div>

<script src="script.js"></script>
</body>
</html>
